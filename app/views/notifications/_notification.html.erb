<% visitor = notification.visitor %>


<div class="user-view clearfix ">
  <%= link_to gravatar_for(visitor, size: 50), user_path(visitor) %>
    <%= "#{visitor.name}さんが" %>

    <% @comment = nil %>
    <% case notification.action 
      when "follow" then %>
        あなたをフォローしました
      <% when "like" then %>
        <%= link_to "あなたの投稿", notification.micropost %>にいいね！しました
      <% when "comment" then %>
        <% @comment = Comment.find_by(id:notification.comment_id)&.content %>
        <% if current_user.id == notification.micropost.user.id %>
          <%= link_to "あなたの投稿", notification.micropost %>にコメントしました
        <% else %>
          <% notification.micropost.user.name %>さんの投稿にコメントしました
        <% end %>
    <% end %>
    <span class="moderate-font">
      <%= " (#{time_ago_in_words(notification.created_at)}前)" %>
    </span>
  <br>
  <% if !@comment.nil? %>
    <p class="moderate-font"><%= @comment %></p>
  <% end %>
</div>